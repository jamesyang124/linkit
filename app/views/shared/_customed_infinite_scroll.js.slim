javascript:

  var $container = $('.isotype').isotope({
    // main isotope options
    itemSelector: '.isotype-item'
  });

  function interval() {
    $( "#load" ).fadeIn(800).fadeOut(800);
  };

  $(".isotype").infinitescroll({
    navSelector: "nav.pagination",
    nextSelector: "nav.pagination a[rel=next]",
    itemSelector: ".infinite-items",
    prefill: true,
    dataType: "json",
    loading: {
      start: function(options) {
        $(this).data('infinitescroll').beginAjax(options);
      },
      finished: function() {
      }
    },
    appendCallback: false,
    errorCallback: function(errorType) {
      if (errorType == "done") { 
        //clearInterval(res);

        $("<div class='row col-md-alert alert alert-warning bottom-alert' id='bottom-msg' role='alert'> No more posts, click to <a class='alert-link' id='bottom-alert' href='#' onClick='return false;'> back to top</a></div>").insertAfter("#iso-layout");
        
        $("#bottom-alert").click(function(){
            $('html body').animate({
              scrollTop: 0,
              }, 1500
            );
        });
      }
    }
  }, function(newElements, opts){
    //console.log(newElements);
    var res = setInterval(interval(), 4);

    var items = "";
    //var images = [];

    for (var i = 0; i < newElements.length; i++) {
      var newItem = genElement(newElements[i]);
      //if (newElements[i].thumbnail_url !== null) {
      //  images[images.length] = newElements[i].thumbnail_url;
      //}
      items += newItem;
    }

    //console.log(images);

    $container.append($(items));
    $('.new-item').css({ opacity: 0 });

    $('.comment_area').blur();
    $('.comment-submit').hide();

    $container.imagesLoaded(function() {
      //$container.isotope('layout');
      $container.isotope("appended", $('.new-item'));
      $('.new-item').removeClass('new-item');
    });

     // $('.comment_area').delegate('.comment_area', 'focus',comment_box_handler);

    clearInterval(res);
  });